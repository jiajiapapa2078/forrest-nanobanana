# Nano Banana v2.0 - è®¤è¯é™åˆ¶çš„Image EditoråŠŸèƒ½è®¾è®¡

## ğŸ“‹ åŠŸèƒ½æ¦‚è¿°

**æ ¸å¿ƒéœ€æ±‚**: åªæœ‰æ³¨å†Œç”¨æˆ·å¯ä»¥ä½¿ç”¨Image EditoråŠŸèƒ½

**å½“å‰çŠ¶æ€**: Image Editorå¯¹æ‰€æœ‰è®¿å®¢å¼€æ”¾
**ç›®æ ‡çŠ¶æ€**: æœªç™»å½•ç”¨æˆ·çœ‹åˆ°ç™»å½•æç¤º,å·²ç™»å½•ç”¨æˆ·å¯ä»¥æ­£å¸¸ä½¿ç”¨

---

## ğŸ¯ ç”¨æˆ·æµç¨‹

### åœºæ™¯1: æœªç™»å½•ç”¨æˆ·è®¿é—®

```
ç”¨æˆ·è®¿é—®ç½‘ç«™
    â†“
æ»šåŠ¨åˆ°Image EditoråŒºåŸŸ
    â†“
çœ‹åˆ°"ç™»å½•å¢™"(Login Wall)
    â†“
æ˜¾ç¤º: "Sign in to start creating"
    â†“
ç‚¹å‡»"Sign In with Google"æŒ‰é’®
    â†“
å®ŒæˆGoogleç™»å½•
    â†“
è‡ªåŠ¨è§£é”Image Editor
    â†“
å¼€å§‹ä½¿ç”¨ç¼–è¾‘åŠŸèƒ½
```

### åœºæ™¯2: å·²ç™»å½•ç”¨æˆ·è®¿é—®

```
ç”¨æˆ·è®¿é—®ç½‘ç«™(å·²ç™»å½•)
    â†“
æ»šåŠ¨åˆ°Image EditoråŒºåŸŸ
    â†“
ç›´æ¥çœ‹åˆ°å®Œæ•´çš„ç¼–è¾‘å™¨ç•Œé¢
    â†“
å¯ä»¥ç«‹å³ä¸Šä¼ å›¾ç‰‡å’Œç”Ÿæˆ
```

---

## ğŸ¨ ç•Œé¢è®¾è®¡

### 1. æœªç™»å½•çŠ¶æ€ - ç™»å½•å¢™è®¾è®¡

#### è§†è§‰æ•ˆæœ:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                         â”‚
â”‚              ğŸŒ Nano Banana AI Editor                   â”‚
â”‚                                                         â”‚
â”‚         [æ¨¡ç³Šçš„ç¼–è¾‘å™¨ç•Œé¢é¢„è§ˆèƒŒæ™¯]                        â”‚
â”‚                                                         â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚    â”‚                                       â”‚           â”‚
â”‚    â”‚   ğŸ”’ Sign in to Start Creating        â”‚           â”‚
â”‚    â”‚                                       â”‚           â”‚
â”‚    â”‚   Unlock powerful AI image editing    â”‚           â”‚
â”‚    â”‚   with your Google account            â”‚           â”‚
â”‚    â”‚                                       â”‚           â”‚
â”‚    â”‚   âœ¨ Upload and edit images           â”‚           â”‚
â”‚    â”‚   ğŸ¨ AI-powered transformations       â”‚           â”‚
â”‚    â”‚   âš¡ Instant results                  â”‚           â”‚
â”‚    â”‚                                       â”‚           â”‚
â”‚    â”‚   [Sign In with Google æŒ‰é’®]          â”‚           â”‚
â”‚    â”‚                                       â”‚           â”‚
â”‚    â”‚   Already have an account? Sign in    â”‚           â”‚
â”‚    â”‚                                       â”‚           â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### è®¾è®¡å…ƒç´ :
- **èƒŒæ™¯**: æ¨¡ç³Šçš„ç¼–è¾‘å™¨ç•Œé¢(bluræ•ˆæœ)
- **ä¸­å¤®å¡ç‰‡**: åŠé€æ˜ç™½è‰²/æ·±è‰²å¡ç‰‡
- **å›¾æ ‡**: ğŸ”’ é”å®šå›¾æ ‡ + ğŸŒ é¦™è•‰å›¾æ ‡
- **æ ‡é¢˜**: "Sign in to Start Creating"
- **å‰¯æ ‡é¢˜**: ç®€çŸ­çš„ä»·å€¼ä¸»å¼ 
- **åŠŸèƒ½åˆ—è¡¨**: 3-4ä¸ªæ ¸å¿ƒåŠŸèƒ½ç‚¹
- **CTAæŒ‰é’®**: é†’ç›®çš„"Sign In with Google"æŒ‰é’®
- **è¾…åŠ©æ–‡æœ¬**: "Already have an account? Sign in"

---

### 2. å·²ç™»å½•çŠ¶æ€ - å®Œæ•´ç¼–è¾‘å™¨

#### è§†è§‰æ•ˆæœ:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Welcome back, [ç”¨æˆ·å]! ğŸ‘‹                              â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚  Prompt Engine   â”‚  â”‚  Output Gallery  â”‚           â”‚
â”‚  â”‚                  â”‚  â”‚                  â”‚           â”‚
â”‚  â”‚  [ä¸Šä¼ å›¾ç‰‡åŒºåŸŸ]   â”‚  â”‚  [ç”Ÿæˆç»“æœåŒºåŸŸ]   â”‚           â”‚
â”‚  â”‚                  â”‚  â”‚                  â”‚           â”‚
â”‚  â”‚  [æç¤ºè¯è¾“å…¥]     â”‚  â”‚                  â”‚           â”‚
â”‚  â”‚                  â”‚  â”‚                  â”‚           â”‚
â”‚  â”‚  [GenerateæŒ‰é’®]   â”‚  â”‚                  â”‚           â”‚
â”‚  â”‚                  â”‚  â”‚                  â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                         â”‚
â”‚  ğŸ’¡ Tip: Try "make it more colorful" or                â”‚
â”‚      "add a sunset background"                         â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### æ–°å¢å…ƒç´ :
- **æ¬¢è¿æ¶ˆæ¯**: "Welcome back, [ç”¨æˆ·å]!"
- **ä½¿ç”¨æç¤º**: åº•éƒ¨æ˜¾ç¤ºä½¿ç”¨æŠ€å·§
- **Creditsæ˜¾ç¤º**: æ˜¾ç¤ºå‰©ä½™credits(å¦‚æœæœ‰é™åˆ¶)

---

## ğŸ’» æŠ€æœ¯å®ç°

### 1. ç»„ä»¶ç»“æ„

```typescript
// components/image-editor.tsx

export function ImageEditor() {
  const [user, setUser] = useState<User | null>(null)
  const [loading, setLoading] = useState(true)
  const supabase = createClient()

  useEffect(() => {
    // æ£€æŸ¥ç”¨æˆ·ç™»å½•çŠ¶æ€
    const checkUser = async () => {
      if (!supabase) {
        setLoading(false)
        return
      }
      
      const { data: { user } } = await supabase.auth.getUser()
      setUser(user)
      setLoading(false)
    }

    checkUser()

    // ç›‘å¬ç™»å½•çŠ¶æ€å˜åŒ–
    const { data: { subscription } } = supabase.auth.onAuthStateChange(
      (_event, session) => {
        setUser(session?.user ?? null)
      }
    )

    return () => subscription.unsubscribe()
  }, [supabase])

  // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
  if (loading) {
    return <LoadingState />
  }

  // æœªç™»å½•æ˜¾ç¤ºç™»å½•å¢™
  if (!user) {
    return <LoginWall />
  }

  // å·²ç™»å½•æ˜¾ç¤ºå®Œæ•´ç¼–è¾‘å™¨
  return <FullEditor user={user} />
}
```

### 2. ç™»å½•å¢™ç»„ä»¶

```typescript
// components/login-wall.tsx

export function LoginWall() {
  const supabase = createClient()

  const handleSignIn = async () => {
    if (!supabase) return
    
    await supabase.auth.signInWithOAuth({
      provider: 'google',
      options: {
        redirectTo: `${window.location.origin}/auth/callback`,
      },
    })
  }

  return (
    <section id="editor" className="py-20 bg-secondary/50 relative">
      {/* æ¨¡ç³Šçš„èƒŒæ™¯é¢„è§ˆ */}
      <div className="absolute inset-0 opacity-30 blur-sm">
        <EditorPreview />
      </div>

      {/* ç™»å½•å¡ç‰‡ */}
      <div className="relative z-10 max-w-2xl mx-auto px-4">
        <Card className="border-2 border-primary/20 bg-card/95 backdrop-blur-md shadow-2xl">
          <CardContent className="p-12 text-center space-y-6">
            {/* å›¾æ ‡ */}
            <div className="flex justify-center gap-4 mb-4">
              <div className="w-16 h-16 rounded-full bg-primary/20 flex items-center justify-center">
                <BananaIcon size={32} />
              </div>
              <div className="w-16 h-16 rounded-full bg-secondary flex items-center justify-center">
                ğŸ”’
              </div>
            </div>

            {/* æ ‡é¢˜ */}
            <div>
              <h2 className="text-3xl font-bold text-foreground mb-2">
                Sign in to Start Creating
              </h2>
              <p className="text-muted-foreground">
                Unlock powerful AI image editing with your Google account
              </p>
            </div>

            {/* åŠŸèƒ½åˆ—è¡¨ */}
            <div className="space-y-3 text-left max-w-md mx-auto">
              <div className="flex items-center gap-3">
                <BananaIcon size={20} className="text-primary" />
                <span className="text-foreground">Upload and edit images</span>
              </div>
              <div className="flex items-center gap-3">
                <BananaIcon size={20} className="text-primary" />
                <span className="text-foreground">AI-powered transformations</span>
              </div>
              <div className="flex items-center gap-3">
                <BananaIcon size={20} className="text-primary" />
                <span className="text-foreground">Instant results</span>
              </div>
            </div>

            {/* CTAæŒ‰é’® */}
            <Button
              onClick={handleSignIn}
              size="lg"
              className="w-full max-w-sm bg-gradient-to-r from-primary to-accent hover:from-primary/90 hover:to-accent/90 text-primary-foreground shadow-lg"
            >
              <svg className="w-5 h-5 mr-2" viewBox="0 0 24 24">
                {/* Googleå›¾æ ‡ */}
              </svg>
              Sign In with Google
            </Button>

            {/* è¾…åŠ©æ–‡æœ¬ */}
            <p className="text-sm text-muted-foreground">
              Free to start â€¢ No credit card required
            </p>
          </CardContent>
        </Card>
      </div>
    </section>
  )
}
```

### 3. APIè·¯ç”±ä¿æŠ¤

```typescript
// app/api/generate/route.ts

export async function POST(request: NextRequest) {
  // éªŒè¯ç”¨æˆ·ç™»å½•
  const supabase = await createClient()
  if (!supabase) {
    return NextResponse.json(
      { error: 'Authentication not configured' },
      { status: 500 }
    )
  }

  const { data: { user }, error: userError } = await supabase.auth.getUser()
  
  if (userError || !user) {
    return NextResponse.json(
      { error: 'Please sign in to use the image editor' },
      { status: 401 }
    )
  }

  // ç»§ç»­å¤„ç†å›¾ç‰‡ç”Ÿæˆ...
}
```

---

## ğŸ¨ æ ·å¼å’ŒåŠ¨ç”»

### CSSæ•ˆæœ

```css
/* ç™»å½•å¢™èƒŒæ™¯æ¨¡ç³Šæ•ˆæœ */
.editor-preview-blur {
  filter: blur(8px);
  opacity: 0.3;
  pointer-events: none;
}

/* ç™»å½•å¡ç‰‡åŠ¨ç”» */
.login-card {
  animation: fadeInUp 0.6s ease-out;
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* æŒ‰é’®æ‚¬åœæ•ˆæœ */
.sign-in-button {
  transition: all 0.3s ease;
}

.sign-in-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
}
```

---

## ğŸ“± å“åº”å¼è®¾è®¡

### æ¡Œé¢ç«¯ (>1024px)
- ç™»å½•å¡ç‰‡å±…ä¸­,æœ€å¤§å®½åº¦600px
- èƒŒæ™¯æ¨¡ç³Šæ•ˆæœå®Œæ•´æ˜¾ç¤º
- æŒ‰é’®å¤§å°ºå¯¸

### å¹³æ¿ç«¯ (768px - 1024px)
- ç™»å½•å¡ç‰‡å®½åº¦90%
- é€‚å½“è°ƒæ•´é—´è·

### ç§»åŠ¨ç«¯ (<768px)
- ç™»å½•å¡ç‰‡å…¨å®½,å·¦å³padding 16px
- å‡å°‘å‚ç›´é—´è·
- æŒ‰é’®å…¨å®½
- ç®€åŒ–èƒŒæ™¯æ•ˆæœ

---

## ğŸ” å®‰å…¨è€ƒè™‘

### 1. å‰ç«¯éªŒè¯
- æ£€æŸ¥ç”¨æˆ·ç™»å½•çŠ¶æ€
- éšè—ç¼–è¾‘å™¨UI
- æ˜¾ç¤ºç™»å½•æç¤º

### 2. åç«¯éªŒè¯
- APIè·¯ç”±éªŒè¯JWT token
- æ‹’ç»æœªè®¤è¯è¯·æ±‚
- è¿”å›401é”™è¯¯

### 3. ä¼šè¯ç®¡ç†
- ä½¿ç”¨Supabase session
- è‡ªåŠ¨åˆ·æ–°token
- ç›‘å¬ç™»å½•çŠ¶æ€å˜åŒ–

---

## ğŸ“Š ç”¨æˆ·ä½“éªŒä¼˜åŒ–

### 1. åŠ è½½çŠ¶æ€
```typescript
if (loading) {
  return (
    <div className="py-20 flex justify-center">
      <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-primary"></div>
    </div>
  )
}
```

### 2. ç™»å½•åè‡ªåŠ¨è·³è½¬
```typescript
// ç™»å½•æˆåŠŸåè‡ªåŠ¨æ»šåŠ¨åˆ°ç¼–è¾‘å™¨
useEffect(() => {
  if (user && !previousUser) {
    document.getElementById('editor')?.scrollIntoView({ behavior: 'smooth' })
  }
}, [user])
```

### 3. é”™è¯¯å¤„ç†
```typescript
if (authError) {
  return (
    <div className="py-20 text-center">
      <p className="text-destructive">
        Authentication error. Please try again.
      </p>
      <Button onClick={retry}>Retry</Button>
    </div>
  )
}
```

---

## ğŸ¯ æˆåŠŸæŒ‡æ ‡

### ç”¨æˆ·è¡Œä¸ºæŒ‡æ ‡
- **ç™»å½•è½¬åŒ–ç‡**: è®¿é—®ç¼–è¾‘å™¨ â†’ å®Œæˆç™»å½•çš„æ¯”ä¾‹
- **ç¼–è¾‘å™¨ä½¿ç”¨ç‡**: ç™»å½•ç”¨æˆ·ä¸­å®é™…ä½¿ç”¨ç¼–è¾‘å™¨çš„æ¯”ä¾‹
- **ä¼šè¯æ—¶é•¿**: ç”¨æˆ·åœ¨ç¼–è¾‘å™¨çš„åœç•™æ—¶é—´

### æŠ€æœ¯æŒ‡æ ‡
- **ç™»å½•æˆåŠŸç‡**: >95%
- **é¡µé¢åŠ è½½æ—¶é—´**: <2ç§’
- **APIå“åº”æ—¶é—´**: <500ms

---

## ğŸš€ å®æ–½æ­¥éª¤

### Phase 1: åŸºç¡€è®¤è¯ (1-2å¤©)
1. âœ… æ·»åŠ ç”¨æˆ·çŠ¶æ€æ£€æŸ¥
2. âœ… åˆ›å»ºLoginWallç»„ä»¶
3. âœ… æ·»åŠ APIè·¯ç”±ä¿æŠ¤
4. âœ… æµ‹è¯•ç™»å½•æµç¨‹

### Phase 2: UIä¼˜åŒ– (1å¤©)
1. âœ… è®¾è®¡ç™»å½•å¢™è§†è§‰æ•ˆæœ
2. âœ… æ·»åŠ åŠ¨ç”»å’Œè¿‡æ¸¡
3. âœ… å“åº”å¼é€‚é…
4. âœ… é”™è¯¯çŠ¶æ€å¤„ç†

### Phase 3: ç”¨æˆ·ä½“éªŒ (1å¤©)
1. âœ… æ·»åŠ æ¬¢è¿æ¶ˆæ¯
2. âœ… ä½¿ç”¨æç¤º
3. âœ… åŠ è½½çŠ¶æ€ä¼˜åŒ–
4. âœ… è‡ªåŠ¨è·³è½¬

### Phase 4: æµ‹è¯•å’Œä¼˜åŒ– (1å¤©)
1. âœ… åŠŸèƒ½æµ‹è¯•
2. âœ… æ€§èƒ½ä¼˜åŒ–
3. âœ… å®‰å…¨å®¡æŸ¥
4. âœ… ç”¨æˆ·æµ‹è¯•

---

## ğŸ“ ä»£ç æ–‡ä»¶æ¸…å•

### éœ€è¦ä¿®æ”¹çš„æ–‡ä»¶:
1. `components/image-editor.tsx` - æ·»åŠ è®¤è¯æ£€æŸ¥
2. `app/api/generate/route.ts` - æ·»åŠ APIä¿æŠ¤

### éœ€è¦åˆ›å»ºçš„æ–‡ä»¶:
1. `components/login-wall.tsx` - ç™»å½•å¢™ç»„ä»¶
2. `components/editor-preview.tsx` - ç¼–è¾‘å™¨é¢„è§ˆç»„ä»¶(æ¨¡ç³ŠèƒŒæ™¯)

---

## ğŸ¨ è§†è§‰å‚è€ƒ

### é…è‰²æ–¹æ¡ˆ
- **ä¸»è‰²**: Primary (é¦™è•‰é»„)
- **å¼ºè°ƒè‰²**: Accent
- **èƒŒæ™¯**: Card with backdrop-blur
- **æ–‡å­—**: Foreground / Muted-foreground

### å­—ä½“
- **æ ‡é¢˜**: Bold, 2xl-3xl
- **æ­£æ–‡**: Regular, sm-base
- **æŒ‰é’®**: Semibold, base-lg

### é—´è·
- **å¡ç‰‡padding**: 12 (48px)
- **å…ƒç´ é—´è·**: 6 (24px)
- **æŒ‰é’®é«˜åº¦**: lg (44px)

---

## â“ å¸¸è§é—®é¢˜

### Q: å¦‚æœç”¨æˆ·ç™»å½•å¤±è´¥æ€ä¹ˆåŠ?
A: æ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯,æä¾›é‡è¯•æŒ‰é’®,å¹¶è®°å½•é”™è¯¯æ—¥å¿—ã€‚

### Q: æ˜¯å¦éœ€è¦è®°ä½ç”¨æˆ·çš„ç¼–è¾‘å†å²?
A: v2.0å¯ä»¥è€ƒè™‘æ·»åŠ å†å²è®°å½•åŠŸèƒ½,å­˜å‚¨åœ¨Supabaseæ•°æ®åº“ã€‚

### Q: å…è´¹ç”¨æˆ·å’Œä»˜è´¹ç”¨æˆ·æœ‰ä»€ä¹ˆåŒºåˆ«?
A: å¯ä»¥é€šè¿‡creditsç³»ç»Ÿé™åˆ¶:
- Free: 10æ¬¡/æœˆ
- Pro: 500æ¬¡/æœˆ
- Max: æ— é™åˆ¶

### Q: å¦‚ä½•å¤„ç†ä¼šè¯è¿‡æœŸ?
A: Supabaseè‡ªåŠ¨å¤„ç†tokenåˆ·æ–°,å¦‚æœè¿‡æœŸä¼šè§¦å‘é‡æ–°ç™»å½•ã€‚

---

## ğŸ¯ ä¸‹ä¸€æ­¥

1. **å®¡æŸ¥è®¾è®¡**: ç¡®è®¤UI/UXè®¾è®¡ç¬¦åˆå“ç‰Œé£æ ¼
2. **å¼€å§‹å®æ–½**: æŒ‰ç…§Phase 1-4çš„æ­¥éª¤å®æ–½
3. **ç”¨æˆ·æµ‹è¯•**: é‚€è¯·æµ‹è¯•ç”¨æˆ·ä½“éªŒç™»å½•æµç¨‹
4. **è¿­ä»£ä¼˜åŒ–**: æ ¹æ®åé¦ˆè°ƒæ•´è®¾è®¡

éœ€è¦æˆ‘å¼€å§‹å®æ–½è¿™ä¸ªåŠŸèƒ½å—?
